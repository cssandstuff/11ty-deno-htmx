<!doctype html>
<html lang="en">
	<head>
		<title>Stuffs</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="Starter site using WebC and 11ty">

		<link rel="stylesheet" href="/css/style.css" webc:keep />
		<script webc:keep>
			let darkMode = window.localStorage.getItem("darkMode");
			let modeStyles;
			if(darkMode==="true") {
				document.documentElement.classList.add('isDark')
			}
		</script>
		
		<style>.w8uyeaxpc{display:block}.w8uyeaxpc:is(h1){padding:var(--space);background-color:var(--yellow);color:var(--black)}.w8uyeaxpc *+*{margin-top:calc(var(--margin)/2)}
.nav{
		margin-bottom: var(--space-3);
	}
.nav ul{
  display: flex;
  gap: var(--space);
  margin: 0;
  padding: 0
}
.nav ul li{
  list-style: none;
  padding: 0; 
  margin: 0;
}
[aria-current="page"]{
  text-decoration-thickness: 2px;
  text-decoration-color: var(--linkColor);
}
.nav ul li:first-child{
  margin-left: calc( var(--space)/ 3 * -1)
}
.nav ul li a{
  padding: var(--space) calc( var(--space)/ 2);
  display: block;
}
/* might want this scoped or pass props to components or some other solution but for now this works */
	c-theme:has(input:checked)::after{
		content: 'is dark!'
	}


	/* body:has(c-theme input:checked){
		--background: var(--black);
		--foreground: var(--white);
		--foreground-100: var(--darkgrey);
		--linkColor: var(--teal);
		color-scheme: dark;
	} */
.wawigbfda{display:block;padding:var(--space);background-color:var(--foreground-100)}</style>

		<script webc:keep src="https://unpkg.com/htmx.org@latest"></script>
		<script webc:keep src="https://unpkg.com/htmx.org@1.9.11/dist/ext/preload.js"></script>
	</head>
	<body hx-ext="preload" hx-boost="true" hx-target="#content" hx-select="#content" hx-swap="outerHTML">

		<!-- <script webc:type="js" webc:is="template" webc:root="override">
	if (level) {
		isLevel = `<h${level} webc:root="override"><slot></slot></h${level}>`
	} 
</script> --><h1 class="h1 w8uyeaxpc">
			WebC starter site
		</h1>


		
		<main id="main">
			

<nav id="nav" class="nav">
  <ul role="list">
    <li>
      <a hx-push-url="/" hx-get="/slim.html"  href="/">Home</a>
    </li>

    
    <li>
      <a
        hx-push-url="/about/" hx-get="/about/slim.html"
        
        href="/about/">
          About
      </a>
    </li>
    <li>
      <a
        hx-push-url="/stuffs/" hx-get="/stuffs/slim.html"
        aria-current="page"
        href="/stuffs/">
          Stuffs
      </a>
    </li>
    <li>
      <a
        hx-push-url="/test/" hx-get="/test/slim.html"
        
        href="/test/">
          Test
      </a>
    </li>
  </ul>
</nav>


			<div id="content"><p>yosephzz</p>
</div>
		</main>
		<footer class="wawigbfda">
	<p>
		&copy; 2024 cssandstuff.
	</p>
	<c-theme><template>
	<label>darkmode <input type="checkbox"></label>
</template>



</c-theme>
</footer>


		<script>document.body.addEventListener('htmx:afterSwap', function(evt) {
		let currentSlug = window.location.pathname;
		let navLinks = document.querySelectorAll('#nav a');


		navLinks.forEach(function(link) {
			let linkSlug = link.getAttribute('href');
			if (currentSlug === linkSlug) {
				link.setAttribute("aria-current", "page")
			}else{
				link.removeAttribute("aria-current")
			}
		});
	});
class cTheme extends HTMLElement {
		connectedCallback() {
			const template = this.querySelector("template");

			// Swap out the template with its contents so they become visible
		  if(template!==null) template.replaceWith(template.content);

			let inputToggle = this.querySelector("input");
			let darkMode = window.localStorage.getItem("darkMode");
			
			if(!darkMode) {
				darkMode =  false
				inputToggle.checked = false;
				
			}else if(darkMode==="true") {
				darkMode =  true;
				inputToggle.checked = true;
			}

			inputToggle.addEventListener("click", () => {
				window.localStorage.setItem('darkMode', inputToggle.checked);
				inputToggle.checked ? document.documentElement.classList.add('isDark') : document.documentElement.classList.remove('isDark');
			})

		}
	}

	customElements.get('c-theme') || customElements.define('c-theme', cTheme);</script>
	</body>
	</html>